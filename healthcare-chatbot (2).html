<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthCare Connect</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #4285f4; --success: #34a853; --danger: #ea4335;
            --light-bg: #f8f9fa; --dark-text: #202124; --gray: #5f6368;
            --border: #dadce0; --white: #fff;
            --shadow: 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);
        }
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; display: flex; justify-content: center;
            align-items: center; padding: 20px; color: var(--dark-text);
        }
        .container {
            width: 100%; max-width: 900px; height: 90vh; max-height: 700px;
            background: var(--white); border-radius: 24px; box-shadow: var(--shadow);
            display: flex; flex-direction: column; overflow: hidden;
            animation: slideIn 0.4s ease-out;
        }
        @keyframes slideIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .header {
            background: var(--primary); color: var(--white); padding: 20px 24px;
            display: flex; align-items: center; gap: 16px;
        }
        .avatar {
            width: 48px; height: 48px; background: rgba(255,255,255,.2);
            border-radius: 50%; display: flex; align-items: center;
            justify-content: center; font-size: 24px;
        }
        .header h1 { font-size: 20px; font-weight: 600; }
        .header p { font-size: 13px; opacity: .9; }
        .messages {
            flex: 1; overflow-y: auto; padding: 24px;
            background: var(--light-bg); scroll-behavior: smooth;
        }
        .messages::-webkit-scrollbar { width: 6px; }
        .messages::-webkit-scrollbar-thumb { background: #dadce0; border-radius: 3px; }
        .msg {
            display: flex; margin-bottom: 20px; animation: fadeIn 0.3s ease-out;
        }
        .msg.bot { justify-content: flex-start; }
        .msg.user { justify-content: flex-end; }
        .msg-avatar {
            width: 32px; height: 32px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 14px; flex-shrink: 0;
        }
        .msg.bot .msg-avatar {
            background: linear-gradient(135deg, var(--primary), #5a99f7);
            color: var(--white); margin-right: 12px;
        }
        .msg.user .msg-avatar {
            background: linear-gradient(135deg, var(--success), #5cbd6e);
            color: var(--white); margin-left: 12px;
        }
        .msg-content { max-width: 65%; }
        .bubble {
            padding: 12px 16px; border-radius: 18px;
            line-height: 1.5; font-size: 14px;
        }
        .msg.bot .bubble {
            background: var(--white); color: var(--dark-text);
            box-shadow: var(--shadow); border-bottom-left-radius: 4px;
        }
        .msg.user .bubble {
            background: var(--primary); color: var(--white);
            border-bottom-right-radius: 4px;
        }
        .time { font-size: 11px; color: var(--gray); margin-top: 4px; padding: 0 4px; }
        .quick-btns {
            display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px;
        }
        .qbtn {
            background: var(--white); border: 1px solid var(--border);
            color: var(--primary); padding: 10px 16px; border-radius: 20px;
            font-size: 13px; font-weight: 500; cursor: pointer;
            transition: all .2s; box-shadow: var(--shadow);
        }
        .qbtn:hover {
            background: var(--primary); color: var(--white);
            transform: translateY(-1px);
        }
        .grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px; margin-top: 12px;
        }
        .card {
            background: var(--white); border: 2px solid var(--border);
            border-radius: 12px; padding: 16px; cursor: pointer;
            transition: all .2s; box-shadow: var(--shadow);
        }
        .card:hover { border-color: var(--primary); transform: translateY(-2px); }
        .card .icon { font-size: 24px; margin-bottom: 8px; color: var(--primary); }
        .card h4 { font-size: 15px; font-weight: 600; margin-bottom: 4px; }
        .card p { font-size: 12px; color: var(--gray); }
        .date-grid, .time-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 8px; margin-top: 12px;
        }
        .dbtn, .tbtn {
            background: var(--white); border: 2px solid var(--border);
            border-radius: 12px; padding: 12px; cursor: pointer;
            transition: all .2s; text-align: center; font-size: 13px; font-weight: 500;
        }
        .dbtn:hover, .tbtn:hover { border-color: var(--primary); transform: translateY(-1px); }
        .dbtn.disabled { opacity: .4; cursor: not-allowed; }
        .dbtn .day { font-size: 11px; opacity: .8; }
        .dbtn .date { font-size: 15px; font-weight: 600; margin: 4px 0; }
        .form {
            background: var(--white); padding: 16px; border-radius: 12px;
            margin-top: 12px; box-shadow: var(--shadow);
        }
        .fg { margin-bottom: 16px; }
        .fg:last-child { margin-bottom: 0; }
        .fg label {
            display: block; font-size: 13px; font-weight: 500;
            margin-bottom: 6px;
        }
        .fg input, .fg textarea {
            width: 100%; padding: 10px 12px; border: 1px solid var(--border);
            border-radius: 8px; font-size: 14px; font-family: inherit;
        }
        .fg input:focus, .fg textarea:focus {
            outline: none; border-color: var(--primary);
        }
        .fg textarea { resize: vertical; min-height: 60px; }
        .submit {
            background: var(--primary); color: var(--white); border: none;
            padding: 12px 24px; border-radius: 24px; font-size: 14px;
            font-weight: 600; cursor: pointer; width: 100%; transition: all .2s;
        }
        .submit:hover { background: #3367d6; transform: translateY(-1px); }
        .typing { display: flex; gap: 4px; padding: 12px 16px; }
        .dot {
            width: 8px; height: 8px; background: var(--gray);
            border-radius: 50%; animation: typing 1.4s infinite;
        }
        .dot:nth-child(2) { animation-delay: .2s; }
        .dot:nth-child(3) { animation-delay: .4s; }
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: .7; }
            30% { transform: translateY(-10px); opacity: 1; }
        }
        .modal {
            display: none; position: fixed; top: 0; left: 0;
            width: 100%; height: 100%; background: rgba(0,0,0,.5);
            justify-content: center; align-items: center; z-index: 1000;
        }
        .modal.show { display: flex; }
        .modal-body {
            background: var(--white); border-radius: 16px; padding: 32px;
            max-width: 500px; width: 90%; box-shadow: var(--shadow);
        }
        .modal-icon {
            width: 64px; height: 64px;
            background: linear-gradient(135deg, var(--success), #5cbd6e);
            border-radius: 50%; display: flex; align-items: center;
            justify-content: center; margin: 0 auto 16px; font-size: 32px; color: var(--white);
        }
        .modal h2 { font-size: 24px; text-align: center; margin-bottom: 8px; }
        .modal-p { color: var(--gray); font-size: 14px; text-align: center; margin-bottom: 24px; }
        .details {
            background: var(--light-bg); border-radius: 12px; padding: 20px; margin-bottom: 24px;
        }
        .row {
            display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 14px;
        }
        .row:last-child { margin-bottom: 0; }
        .label { color: var(--gray); font-weight: 500; }
        .value { color: var(--dark-text); font-weight: 600; }
        .mbtn {
            padding: 12px 24px; border-radius: 24px; font-size: 14px;
            font-weight: 600; cursor: pointer; border: none; width: 100%;
        }
        .mbtn.primary { background: var(--primary); color: var(--white); }
        .appt-card {
            background: var(--white); border: 1px solid var(--border);
            border-radius: 12px; padding: 16px; margin-bottom: 12px;
        }
        .appt-card h4 { font-size: 15px; font-weight: 600; margin-bottom: 8px; }
        .appt-card p { font-size: 13px; color: var(--gray); margin-bottom: 4px; }
        .cbtn {
            margin-top: 12px; background: var(--danger); color: var(--white);
            border: none; padding: 8px 16px; border-radius: 16px;
            font-size: 12px; cursor: pointer;
        }
        @media (max-width: 768px) {
            .container { height: 100vh; max-height: 100vh; border-radius: 0; }
            .msg-content { max-width: 80%; }
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="avatar"><i class="fas fa-hospital"></i></div>
            <div>
                <h1>HealthCare Connect</h1>
                <p>Your trusted healthcare assistant</p>
            </div>
        </div>
        <div class="messages" id="msgs"></div>
    </div>
    <div class="modal" id="modal">
        <div class="modal-body">
            <div class="modal-icon"><i class="fas fa-check"></i></div>
            <h2>Appointment Confirmed!</h2>
            <p class="modal-p">Your appointment has been successfully booked</p>
            <div class="details" id="details"></div>
            <button class="mbtn primary" onclick="closeModal()">Done</button>
        </div>
    </div>
    <script>
        const doctors = [
            {id: 1, name: 'Dr. Sarah Johnson', specialty: 'Cardiology', icon: 'fa-heartbeat', avail: [1,2,3,5]},
            {id: 2, name: 'Dr. Michael Chen', specialty: 'Orthopedics', icon: 'fa-bone', avail: [0,1,3,4,6]},
            {id: 3, name: 'Dr. Emily Rodriguez', specialty: 'Pediatrics', icon: 'fa-baby', avail: [0,2,4,5]},
            {id: 4, name: 'Dr. James Williams', specialty: 'Dermatology', icon: 'fa-hand-holding-medical', avail: [1,2,3,4,6]},
            {id: 5, name: 'Dr. Lisa Anderson', specialty: 'General Medicine', icon: 'fa-stethoscope', avail: [0,1,2,3,4,5,6]}
        ];
        const slots = ['9:00 AM','9:30 AM','10:00 AM','10:30 AM','11:00 AM','11:30 AM','12:00 PM','12:30 PM','1:00 PM','1:30 PM','2:00 PM','2:30 PM','3:00 PM','3:30 PM','4:00 PM','4:30 PM','5:00 PM'];
        let state = {step: 'welcome', doc: null, date: null, time: null, info: {}};
        let appts = [];

        function time() {
            const d = new Date();
            return d.toLocaleTimeString('en-US', {hour: 'numeric', minute: '2-digit'});
        }
        function scroll() {
            const m = document.getElementById('msgs');
            m.scrollTop = m.scrollHeight;
        }
        function addBot(txt, btns = null) {
            const m = document.getElementById('msgs');
            const d = document.createElement('div');
            d.className = 'msg bot';
            let h = `<div class="msg-avatar"><i class="fas fa-robot"></i></div><div class="msg-content"><div class="bubble">${txt}</div><div class="time">${time()}</div>`;
            if (btns) {
                h += '<div class="quick-btns">';
                btns.forEach(b => {
                    const c = getBtn(b);
                    h += `<button class="qbtn" onclick="handle('${b}')"><i class="${c.icon}"></i> ${c.text}</button>`;
                });
                h += '</div>';
            }
            h += '</div>';
            d.innerHTML = h;
            m.appendChild(d);
            scroll();
        }
        function addUser(txt) {
            const m = document.getElementById('msgs');
            const d = document.createElement('div');
            d.className = 'msg user';
            d.innerHTML = `<div class="msg-content"><div class="bubble">${txt}</div><div class="time">${time()}</div></div><div class="msg-avatar"><i class="fas fa-user"></i></div>`;
            m.appendChild(d);
            scroll();
        }
        function typing() {
            const m = document.getElementById('msgs');
            const d = document.createElement('div');
            d.className = 'msg bot';
            d.id = 'typing';
            d.innerHTML = '<div class="msg-avatar"><i class="fas fa-robot"></i></div><div class="msg-content"><div class="bubble"><div class="typing"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div></div>';
            m.appendChild(d);
            scroll();
        }
        function rmTyping() {
            const t = document.getElementById('typing');
            if (t) t.remove();
        }
        function getBtn(t) {
            const c = {
                'book': {text: 'Book Appointment', icon: 'fas fa-calendar-plus'},
                'view': {text: 'View Appointments', icon: 'fas fa-list'},
                'info': {text: 'Hospital Info', icon: 'fas fa-hospital'},
                'cancel': {text: 'Cancel Appointment', icon: 'fas fa-times-circle'},
                'menu': {text: 'Back to Menu', icon: 'fas fa-home'}
            };
            return c[t] || {text: t, icon: 'fas fa-circle'};
        }
        function handle(t) {
            const c = getBtn(t);
            addUser(c.text);
            setTimeout(() => {
                typing();
                setTimeout(() => {
                    rmTyping();
                    if (t === 'book') startBook();
                    else if (t === 'view') viewAppts();
                    else if (t === 'info') showInfo();
                    else if (t === 'cancel') cancelFlow();
                    else if (t === 'menu') reset();
                }, 800);
            }, 300);
        }
        function startBook() {
            state.step = 'doctor';
            addBot("Great! Let's book your appointment. Please select a doctor:");
            showDocs();
        }
        function showDocs() {
            const m = document.getElementById('msgs');
            const d = document.createElement('div');
            d.className = 'msg bot';
            let h = '<div class="msg-avatar"><i class="fas fa-robot"></i></div><div class="msg-content"><div class="grid">';
            doctors.forEach(doc => {
                h += `<div class="card" onclick="selDoc(${doc.id})"><div class="icon"><i class="fas ${doc.icon}"></i></div><h4>${doc.name}</h4><p>${doc.specialty}</p></div>`;
            });
            h += '</div></div>';
            d.innerHTML = h;
            m.appendChild(d);
            scroll();
        }
        function selDoc(id) {
            const doc = doctors.find(d => d.id === id);
            state.doc = doc;
            addUser(`${doc.name} - ${doc.specialty}`);
            setTimeout(() => {
                typing();
                setTimeout(() => {
                    rmTyping();
                    state.step = 'date';
                    addBot(`Excellent! ${doc.name} is available on these dates:`);
                    showDates();
                }, 800);
            }, 300);
        }
        function showDates() {
            const m = document.getElementById('msgs');
            const d = document.createElement('div');
            d.className = 'msg bot';
            let h = '<div class="msg-avatar"><i class="fas fa-robot"></i></div><div class="msg-content"><div class="date-grid">';
            for (let i = 0; i < 7; i++) {
                const dt = new Date();
                dt.setDate(dt.getDate() + i);
                const ok = state.doc.avail.includes(i);
                const dis = !ok ? 'disabled' : '';
                h += `<div class="dbtn ${dis}" onclick="${ok ? `selDate('${dt.toISOString()}')` : ''}"><div class="day">${['Sun','Mon','Tue','Wed','Thu','Fri','Sat'][dt.getDay()]}</div><div class="date">${dt.getDate()}</div><div class="day">${['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'][dt.getMonth()]}</div></div>`;
            }
            h += '</div></div>';
            d.innerHTML = h;
            m.appendChild(d);
            scroll();
        }
        function selDate(ds) {
            const dt = new Date(ds);
            state.date = dt;
            addUser(dt.toLocaleDateString('en-US', {weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'}));
            setTimeout(() => {
                typing();
                setTimeout(() => {
                    rmTyping();
                    state.step = 'time';
                    addBot("Perfect! Select a time slot:");
                    showTimes();
                }, 800);
            }, 300);
        }
        function showTimes() {
            const m = document.getElementById('msgs');
            const d = document.createElement('div');
            d.className = 'msg bot';
            let h = '<div class="msg-avatar"><i class="fas fa-robot"></i></div><div class="msg-content"><div class="time-grid">';
            slots.forEach(s => {
                h += `<div class="tbtn" onclick="selTime('${s}')">${s}</div>`;
            });
            h += '</div></div>';
            d.innerHTML = h;
            m.appendChild(d);
            scroll();
        }
        function selTime(t) {
            state.time = t;
            addUser(t);
            setTimeout(() => {
                typing();
                setTimeout(() => {
                    rmTyping();
                    state.step = 'info';
                    addBot("Great! Now I need some information:");
                    showForm();
                }, 800);
            }, 300);
        }
        function showForm() {
            const m = document.getElementById('msgs');
            const d = document.createElement('div');
            d.className = 'msg bot';
            d.innerHTML = `<div class="msg-avatar"><i class="fas fa-robot"></i></div><div class="msg-content"><div class="form"><div class="fg"><label>Full Name</label><input type="text" id="name" placeholder="Enter your name"></div><div class="fg"><label>Email</label><input type="email" id="email" placeholder="Enter your email"></div><div class="fg"><label>Reason for Visit</label><textarea id="reason" placeholder="Brief description"></textarea></div><button class="submit" onclick="submit()">Confirm Appointment</button></div></div>`;
            m.appendChild(d);
            scroll();
        }
        function submit() {
            const n = document.getElementById('name').value;
            const e = document.getElementById('email').value;
            const r = document.getElementById('reason').value;
            if (!n || !e || !r) {
                alert('Please fill all fields');
                return;
            }
            state.info = {name: n, email: e, reason: r};
            const a = {
                id: Date.now(),
                doctor: state.doc.name,
                specialty: state.doc.specialty,
                date: state.date.toLocaleDateString('en-US', {weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'}),
                time: state.time,
                name: n,
                email: e,
                reason: r
            };
            appts.push(a);
            showModal(a);
        }
        function showModal(a) {
            const d = document.getElementById('details');
            d.innerHTML = `<div class="row"><span class="label">Doctor:</span><span class="value">${a.doctor}</span></div><div class="row"><span class="label">Specialty:</span><span class="value">${a.specialty}</span></div><div class="row"><span class="label">Date:</span><span class="value">${a.date}</span></div><div class="row"><span class="label">Time:</span><span class="value">${a.time}</span></div><div class="row"><span class="label">Patient:</span><span class="value">${a.name}</span></div>`;
            document.getElementById('modal').classList.add('show');
        }
        function closeModal() {
            document.getElementById('modal').classList.remove('show');
            reset();
        }
        function viewAppts() {
            if (appts.length === 0) {
                addBot("You don't have any appointments yet.", ['book', 'menu']);
                return;
            }
            addBot("Here are your upcoming appointments:");
            const m = document.getElementById('msgs');
            const d = document.createElement('div');
            d.className = 'msg bot';
            let h = '<div class="msg-avatar"><i class="fas fa-robot"></i></div><div class="msg-content">';
            appts.forEach(a => {
                h += `<div class="appt-card"><h4>${a.doctor}</h4><p><strong>Date:</strong> ${a.date}</p><p><strong>Time:</strong> ${a.time}</p><p><strong>Reason:</strong> ${a.reason}</p><button class="cbtn" onclick="delAppt(${a.id})">Cancel</button></div>`;
            });
            h += '</div>';
            d.innerHTML = h;
            m.appendChild(d);
            scroll();
            setTimeout(() => addBot("Anything else?", ['book', 'info', 'menu']), 500);
        }
        function delAppt(id) {
            appts = appts.filter(a => a.id !== id);
            addUser("Cancel appointment");
            setTimeout(() => {
                typing();
                setTimeout(() => {
                    rmTyping();
                    addBot("Appointment cancelled successfully!", ['view', 'book', 'menu']);
                }, 800);
            }, 300);
        }
        function cancelFlow() {
            if (appts.length === 0) {
                addBot("No appointments to cancel.", ['book', 'menu']);
                return;
            }
            viewAppts();
        }
        function showInfo() {
            addBot("üìç <strong>HealthCare Connect Hospital</strong><br>123 Medical Plaza, Healthcare District<br>üìû Phone: (555) 123-4567<br>üìß Email: info@healthcareconnect.com<br>üïê Hours: Mon-Sat, 8 AM - 8 PM", ['book', 'view', 'menu']);
        }
        function reset() {
            state = {step: 'welcome', doc: null, date: null, time: null, info: {}};
            addBot("Welcome back! How can I help you today?", ['book', 'view', 'info']);
        }
        addBot("Hello! üëã Welcome to HealthCare Connect. I'm here to help you book an appointment with one of our specialists.", ['book', 'view', 'info']);
    </script>
</body>
</html>